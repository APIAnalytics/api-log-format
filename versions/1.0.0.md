# API Log Format (ALF) v1.0.0 *(Deprecated)*

**ALF** *(API Log Format)* is a new HTTP logging format that utilizes [**HAR**][har-spec] *(HTTP Archive Format)*.

*[skip to the full json example](#full-example)*

### Encoding

A log message is **REQUIRED** to be saved in `UTF-8` encoding. Other encodings are forbidden.

## Properties

Each log entry is represented by a JSON object with the following properties:

```js
{
  "version": "<spec version>",
  "serviceToken": "<service token>",
  "environment": "<environment name>",
  "clientIPAddress": "<origin address>",
  "har": {...},
}
```

| Name                  | Type      | Required   | Description                                                                        |
| --------------------- | --------- | ---------- | ---------------------------------------------------------------------------------- |
| **`version`**         | `String`  | `required` | ALF Format Spec Version, _current value: **"1.0.0"**_                              |
| **`serviceToken`**    | `String`  | `required` | obtain yours by registering for a free trial at [APIAnalytics.com][analytics-url]  |
| **`environment`**     | `String`  | `optional` | server environment name                                                            |
| **`clientIPAddress`** | `String`  | `optional` | IP address of the client originating the request                                   |
| **`har`**             | `Object`  | `required` | please refer to the [Official **HAR** *(HTTP Archive Format)* Spec][har-spec]      |

###### Full Example

```json
{
  "version": "1.0.0",
  "serviceToken": "<my service token>",
  "clientIPAddress": "10.10.10.20",
  "environment": "PRODUCTION",
  "har": {
    "log": {
      "version": "1.2",
      "creator": {
        "name": "HAR Logger",
        "version": "1.0.0"
      },
      "entries": [
        {
          "startedDateTime": "2015-02-10T07:33:17.146Z",
          "serverIPAddress": "10.10.10.10",
          "time": 181.59985542297363,
          "request": {
            "method": "POST",
            "url": "http://api.mockbin.com/",
            "httpVersion": "HTTP/1.1",
            "queryString": [
              { "name": "foo", "value": "bar" },
              { "name": "baz", "value": "abc" }
            ],
            "headers": [
              { "name": "Origin",           "value": "http://mockbin.com" },
              { "name": "Accept-Encoding",  "value": "gzip, deflate" },
              { "name": "Host",             "value": "mockbin.com" },
              { "name": "Content-Type",     "value": "application/x-www-form-urlencoded" },
              { "name": "Accept",           "value": "application/json" },
              { "name": "Content-Length",   "value": "234" }
            ],
            "cookies": [
              {
                "name": "foo",
                "expires": "2015-02-10T07:33:17.146Z",
                "value": "bar",
                "httpOnly": false,
                "secure": false
              }
            ],
            "headersSize": 44,
            "bodySize": 14,
            "postData": {
              "mimeType": "application/x-www-form-urlencoded",
              "text": "foo=bar&bar=baz",
              "params": [
                { "name": "foo", "value": "bar" },
                { "name": "bar", "value": "baz" }
              ]
            }
          },
          "response": {
            "status": 201,
            "statusText": "Created",
            "httpVersion": "HTTP/1.1",
            "headers": [
              { "name": "Date",         "value": "Sun, 03 May 2015 18:47:46 GMT" },
              { "name": "Content-Type", "value": "application/json" }
            ],
            "cookies": [],
            "content": {
              "size": 23,
              "mimeType": "application/json",
              "text": "{\"foo\": \"bar\"}",
              "compression": -17
            },
            "redirectURL": "",
            "headersSize": 215,
            "bodySize": 286
          },
          "cache": {},
          "timings": {
            "blocked": 0.381000001652865,
            "dns": -1,
            "connect": -1,
            "send": 0.05899999996472599,
            "wait": 179.1829999983744,
            "receive": 1.9768554229816289,
            "ssl": -1
          },
          "connection": "3178207"
        }
      ]
    }
  }
}
```

[analytics-url]: http://apianalytics.com "API Analytics"
[har-spec]: https://github.com/ahmadnassri/har-spec/blob/master/versions/1.2.md "Har 1.2 Specification"
[example]: #full-example "Example ALF Object"
